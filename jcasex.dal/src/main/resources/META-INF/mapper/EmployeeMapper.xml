<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="employee">

    <resultMap id="EmployeeResultMap" type="Employee">
    	<id 	column="id" 			property="id"/>
        <result column="login_account"  property="loginAccount" />
        <result column="password"     	property="password" />
        <result column="nickname"     	property="nickname" />
        
        <result column="status"     	property="status" /> 
        
        <result column="creator_id"  	property="creatorId" />
        <result column="gmt_created"  	property="gmtCreated" />
        
        <result column="modifier_id"  	property="modifierId" />
        <result column="gmt_modified" 	property="gmtModified" />
    </resultMap>
    
    <sql id="columns">
    	id,login_account,password,nickname,status,creator_id,gmt_created,modifier_id,gmt_modified
    </sql>
    
    <insert id="insert" parameterType="Employee" useGeneratedKeys="true" keyProperty="id">
    	insert into jcasex_employee(id,login_account,password,nickname,status,creator_id,gmt_created)
    	values(#{id},#{loginAccount},#{password},#{nickname},#{status},#{creatorId},NOW()) 
		<selectKey resultType="long" keyProperty="id" >
   			SELECT @@IDENTITY AS id
   		</selectKey>
    </insert>
    
    <select id="selectById" parameterType="long" resultMap="EmployeeResultMap">
    	select 
    		<include refid="employee.columns" />
    	from 
    		jcasex_employee
    	where 
    		id = #{id}
    </select>
    
    <select id="selectByLoginAccountAndPassword"  parameterType="Map" resultMap="EmployeeResultMap">
    	select 
    		<include refid="employee.columns" />
    	from 
    		jcasex_employee
    	where
    		login_account=#{loginAccount}
    		and password=#{password}
    </select>
    
    <select id="selectByLoginAccount" parameterType="String" resultMap="EmployeeResultMap">
    	select 
    		 <include refid="employee.columns" />
    	from 
    		jcasex_employee
    	where
    		login_account=#{value}
    </select>
</mapper>